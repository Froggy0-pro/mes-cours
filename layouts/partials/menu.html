<nav>
{{ partial "docs/brand" . }}
{{ partial "docs/search" . }}
{{ if hugo.IsMultilingual }}
  {{ partial "docs/languages" . }}
{{ end }}

{{ partial "docs/inject/menu-before" . }}
{{ partial "docs/menu-hugo" (dict "Page" .Page "Menu" .Site.Menus.before) }}

{{ partial "docs/menu-filetree" . }}

{{ partial "docs/menu-hugo" (dict "Page" .Page "Menu" .Site.Menus.after) }}
{{ partial "docs/inject/menu-after" . }}
</nav>

<!-- Restore menu position as soon as possible to avoid flickering -->
{{ $script := resources.Get "menu-reset.js" | resources.Minify }}
{{ with $script.Content }}
  <script>{{ . | safeJS }}</script>
{{ end }}

{{ range .Site.Menus.main }}
  <li class="menu-item">
    {{ if .HasChildren }}
      <button class="toggle" onclick="toggleSubmenu(this)">+</button>
    {{ end }}
    <a href="{{ .URL }}">{{ .Name }}</a>
    {{ if .HasChildren }}
      <ul class="submenu">
        {{ range .Children }}
          <li><a href="{{ .URL }}">{{ .Name }}</a></li>
        {{ end }}
      </ul>
    {{ end }}
  </li>
{{ end }}
